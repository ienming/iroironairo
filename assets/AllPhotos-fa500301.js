import{r as c,a as i,c as u,b as s,t as m,k as ye,v as ke,F as Q,l as V,m as F,q as ee,h as x,_ as te,i as U,e as C,s as be,u as xe,x as we,y as Se,o as je,w as qe,g as y,z as T,T as B,A as $e,B as Pe,C as q,D as Ce,E as Te,n as I,G as J,H as Y,p as Ne,d as Me}from"./index-12b0ab8f.js";import{B as ze,N as Be}from"./Navigator-7cbb3bbd.js";import{I as Ie}from"./IroModal-bad7721a.js";import"./Polaroid-fd419cb8.js";import"./PolaroidText-b043200d.js";const Je={class:"iro-selection-button p-2 rounded position-relative d-flex",type:"button"},Le={class:"flex-shrink-0"},Oe={class:"w-100 d-flex justify-content-between align-items-center"},Ae={class:"me-5"},De=s("i",{class:"fa-solid fa-chevron-down"},null,-1),Qe={class:"list-group list-group-flush shadow-lg rounded position-absolute top-0 w-100 iro-selection-list"},Ve=["onClick"],Fe={key:0},Z={__name:"Selection",props:["label","options","optionsQuants","currentLabel"],emits:["change-value"],setup(p,{emit:g}){const d=c(!1);function n(k){g("change-value",k)}return(k,v)=>(i(),u("div",{class:"iro-selection position-relative",onMouseenter:v[0]||(v[0]=r=>d.value=!0),onMouseleave:v[1]||(v[1]=r=>d.value=!1)},[s("div",Je,[s("span",Le,m(p.label+"："),1),s("span",Oe,[s("span",Ae,m(p.currentLabel),1),De])]),ye(s("ul",Qe,[(i(!0),u(Q,null,V(p.options,r=>(i(),u("li",{type:"button",class:F(["list-group-item list-group-item-action",p.currentLabel==r.label?"active":""]),"aria-current":"true",onClick:N=>n(r.key)},[ee(m(r.label)+" ",1),p.optionsQuants.length==p.options.length&&r.label!=="全部"?(i(),u("span",Fe," ("+m(p.optionsQuants.find(N=>N.key==r.key).quant)+")",1)):x("",!0)],10,Ve))),256))],512),[[ke,d.value]])],32))}};const We={class:"checkbox-btn"},He=["id"],Ee=["for"],Ge={key:0,class:"fa-solid fa-plus"},Re={key:1,class:"fa-solid fa-check"},Xe={key:2},Ke={__name:"ButtonCheckbox",props:{label:{type:String,default:"label"},value:{type:String,default:"value"},checked:{type:Boolean,default:!1},quant:{type:Object,default:{}}},emits:["change-value"],setup(p,{emit:g}){const d=p;return(n,k)=>(i(),u("div",We,[s("input",{id:d.value,type:"checkbox",class:"d-none",onChange:k[0]||(k[0]=v=>g("change-value",{key:d.value,value:!d.checked}))},null,40,He),s("label",{for:d.value,role:"button",class:F(["m-0 px-2 py-1 rounded-pill border border-dark flex-shrink-0 opacity-75-hover",d.quant.quant>0&&d.checked?["bg-dark","text-white"]:"opacity-25"])},[ee(m(d.label)+" ",1),d.checked?(i(),u("i",Re)):(i(),u("i",Ge)),d.value!=="全部"?(i(),u("span",Xe,"("+m(d.quant.quant)+")",1)):x("",!0)],10,Ee)]))}},Ue=te(Ke,[["__scopeId","data-v-93a3501a"]]);const le=p=>(Ne("data-v-c19f7410"),p=p(),Me(),p),Ye={class:"min-vh-100 bg-silver"},Ze={class:"d-flex"},et={style:{height:"33vh"}},tt={key:0,id:"randomPhoto_3"},lt=["src"],ot=["src"],at={key:0,id:"randomPhoto_1",class:"d-none d-lg-block"},st=["src"],nt=["src"],it={class:"row justify-content-center"},ut=["onWheel"],rt={key:0,class:"ff-serif position-relative h-100"},ct={class:"bg-silver p-1 m-0 position-absolute",style:{top:"-60px"}},ht={class:"mb-1 fw-bold d-block"},dt=["data-place","onClick"],vt={class:"position-relative"},ft={class:"d-flex"},pt={class:"row ff-serif text-dark col-lg-5 me-auto ps-3 ps-lg-6 pt-3 d-flex"},gt=Ce('<div class="col-lg-8" data-v-c19f7410><h2 class="fs-6" data-v-c19f7410>iroironairo</h2><h1 class="fw-semibold mt-2 mb-3" data-v-c19f7410>色々な色</h1><h3 class="d-flex flex-grow align-items-center opacity-50" style="font-size:14px;" data-v-c19f7410><span data-v-c19f7410>2022.09.28</span><div style="height:1px;" class="w-100 bg-dark mx-2" data-v-c19f7410></div><span data-v-c19f7410>2023.03.24</span></h3></div>',1),_t=le(()=>s("i",{class:"fa-solid fa-swatchbook"},null,-1)),mt={class:"ff-sans ps-2 fs-small"},yt={key:0},kt={key:1},bt={key:0,id:"randomPhoto_2",class:"ms-auto pe-lg-8 pt-3"},xt=["src"],wt=["src"],St={key:0,class:"d-flex justify-content-end pb-4"},jt=le(()=>s("i",{class:"fa-solid fa-xmark fa-xl",role:"button"},null,-1)),qt=[jt],$t={class:"pb-2 d-block"},Pt={class:"d-flex flex-wrap gap-3"},Ct={class:"mt-4 d-flex gap-2 flex-wrap"},Tt={__name:"AllPhotos",setup(p){const g=U("csvData",[]),d=U("usingMobile",!1),n=C(()=>{let l=g.value.filter(e=>e.main_color);if(r.value.length<v.value.length){let e=[];r.value.forEach(a=>{e=e.concat(l.filter(f=>a==="全部"?f:f.places.includes(a)))});const o=new Set(e);l=Array.from(o)}$.value.key!=="0"&&(l=l.filter(e=>e.date.split("/")[1]==$.value.key)),P.value.key!=="全部"&&(l=l.filter(e=>e.time.split(":")[0]==P.value.key)),l=l.sort((e,o)=>new Date(e.iso_date.slice(0,-1))-new Date(o.iso_date.slice(0,-1)));let t=[];for(let e=0;e<l.length;e++){const o=l[e].date.split("/")[1];if(e==0){let a={type:"monthTag",value:o};const f=k(o);a.zh=f.zh,a.jp=f.jp,t.push(a)}if(t.push(l[e]),e<l.length-1){const a=l[e+1].date.split("/")[1];if(o!==a){let f={type:"monthTag",value:a};const K=k(a);f.zh=K.zh,f.jp=K.jp,t.push(f)}}}return t});function k(l){let t={};switch(l){case"09":t.zh="九月",t.jp="Kugatsu";break;case"10":t.zh="十月",t.jp="Jyuugatsu";break;case"11":t.zh="十一月",t.jp="Jyuuichigatsu";break;case"12":t.zh="十二月",t.jp="Jyuunigatsu";break;case"01":t.zh="一月",t.jp="Ichigatsu";break;case"02":t.zh="二月",t.jp="Nigatsu";break;case"03":t.zh="三月",t.jp="Sangatsu";break}return t}const v=C(()=>{let l=g.value.map(o=>o.places).filter(o=>Array.isArray(o)),t=["全部"];for(let o=0;o<l.length;o++)for(let a=0;a<l[o].length;a++)t.push(l[o][a]);return t=new Set(t),[...t].map(o=>({key:o,label:o}))}),r=c([]);for(let l=0;l<v.value.length;l++)r.value.push(v.value[l].key);function N(l){if(l.key==="全部")if(l.value){r.value=[];for(let t=0;t<v.value.length;t++)r.value.push(v.value[t].key)}else r.value=[];else l.value?r.value.push(l.key):r.value=r.value.filter(t=>t!==l.key)}const W=c([]);function oe(){const l=n.value.length?JSON.parse(JSON.stringify(n.value.filter(e=>e.type!=="monthTag"))):g.value;let t=[];for(let e=0;e<v.value.length;e++){let o={};o.key=v.value[e].key,e===0?o.quant=n.value.filter(a=>a.type!=="monthTag").length:o.quant=l.filter(a=>{var f;return(f=a.places)==null?void 0:f.includes(v.value[e].key)}).length,t.push(o)}W.value=t}be(()=>{const l=xe();if(JSON.stringify(l.query)!=="{}"){const t=JSON.parse(l.query.place);r.value=[],r.value.push(t)}}),we((l,t)=>{const e=JSON.parse(l.query.place);r.value=[],r.value.push(e),z.value=!1});const w=[{label:"全部",key:"0"},{label:"九月",key:"09"},{label:"十月",key:"10"},{label:"十一月",key:"11"},{label:"十二月",key:"12"},{label:"一月",key:"01"},{label:"二月",key:"02"},{label:"三月",key:"03"}],$=c(w[0]),H=c([]);function ae(l){$.value=w.find(t=>t.key==l)}function se(){const l=n.value.length?JSON.parse(JSON.stringify(n.value.filter(e=>e.type!=="monthTag"))):g.value;let t=[];for(let e=0;e<w.length;e++){let o={};o.key=w[e].key,e===0?o.quant=n.value.filter(a=>a.type!=="monthTag").length:o.quant=l.filter(a=>{var f;return((f=a.date)==null?void 0:f.split("/")[1])==w[e].key}).length,t.push(o)}H.value=t}const S=C(()=>{let l=g.value.map(o=>o.time).filter(o=>o),t=[];for(let o=0;o<l.length;o++)t.push(l[o].split(":")[0]);return t.sort((o,a)=>o-a),t.unshift("全部"),t=new Set(t),[...t].map(o=>{let a={key:o,label:o};return o!=="全部"&&(o<6&&(a.label="凌晨"+o.slice(-1)+"點"),o>=6&&o<10&&(a.label="早上"+o.slice(-1)+"點"),o>=10&&o<12&&(a.label="早上"+o+"點"),o==12&&(a.label="中午12點"),o>12&&o<18&&(a.label="下午"+(o*1-12)+"點"),o>=18&&(a.label="晚上"+(o*1-12)+"點")),a})}),P=c(S.value[0]),E=c([]);function ne(l){P.value=S.value.find(t=>t.key==l)}function ie(){const l=JSON.parse(JSON.stringify(n.value.filter(e=>e.type!=="monthTag")));let t=[];for(let e=0;e<S.value.length;e++){let o={};o.key=S.value[e].key,e===0?o.quant=n.value.filter(a=>a.type!=="monthTag").length:o.quant=l.filter(a=>a.time.split(":")[0]==S.value[e].key).length,t.push(o)}E.value=t}const G=c(10),M=c(!1),ue=C(()=>P.value.label!=="全部"||$.value.label!=="全部"||!r.value.includes("全部")),z=c(!1),_=c(null);function re(l){_.value=l,z.value=!0}function ce(){const l=e=>e.name===_.value.name,t=n.value.findIndex(l);n.value[t-1].main_color?_.value=n.value[t-1]:t==1?_.value=n.value[n.value.length-1]:_.value=n.value[t-2]}function he(){const l=e=>e.name===_.value.name,t=n.value.findIndex(l);t==n.value.length-1?_.value=n.value[1]:n.value[t+1].main_color?_.value=n.value[t+1]:_.value=n.value[t+2]}const b=c([]),j=Se({}),[de,ve,fe]=[c(null),c(null),c(null)],h=C(()=>{let l=[];const t=JSON.parse(JSON.stringify(n.value)).filter(e=>e.type!=="monthTag");return b.value.forEach(e=>{l.push(t[e])}),l});function pe(){b.value=[];for(const e in j)j[e]=!1;const l=JSON.parse(JSON.stringify(n.value)).filter(e=>e.type!=="monthTag"),t=l.length-1;if(l.length>3)for(;b.value.length<3;){const e=Math.floor(Math.random()*(t+1));b.value.includes(e)||b.value.push(e)}else for(;b.value.length<=l.length-1;){const e=Math.floor(Math.random()*(t+1));b.value.includes(e)||b.value.push(e)}}function L(l){j[l]=!0}const O=c(null);function ge(){const l=O.value;event.deltaX==0?l.scrollLeft+=event.deltaY:l.scrollLeft+=event.deltaX}const A=c(!1),R=c(!1);function D(){const l=O.value;if(l){const t=l.clientWidth,e=l.scrollWidth;if(!A.value&&l.scrollLeft<e-t){if(!R.value){let o=l.scrollLeft+1;l.scrollLeft=o,requestAnimationFrame(D)}}else l.scrollLeft>=e-t&&(R.value=!0)}}function _e(){A.value=!1,D()}const X=c(null);function me(){Te(()=>{[...X.value.querySelectorAll('[data-bs-toggle="tooltip"]')].map(t=>new bootstrap.Tooltip(t))})}return je(()=>{qe(n,()=>{pe(),ie(),se(),oe()},{immediate:!0}),window.setTimeout(()=>{requestAnimationFrame(D)},3e3),d.value&&(G.value=30),me()}),(l,t)=>(i(),u("div",Ye,[s("section",null,[s("div",Ze,[s("div",et,[h.value.length>2?(i(),u("div",tt,[s("img",{ref_key:"randomPhoto_3",ref:fe,src:h.value[2].url_google,class:"d-none",onLoad:t[0]||(t[0]=e=>L("3"))},null,40,lt),y(B,{name:"fade",mode:"out-in"},{default:T(()=>[j[3]?(i(),u("img",{key:0,alt:"",class:"random-photo",src:h.value[2].url_google},null,8,ot)):(i(),u("div",{key:1,style:I({"background-color":q(J)(h.value[2].colors[0].h,h.value[2].colors[0].s,h.value[2].colors[0].l)}),class:"random-photo"},null,4))]),_:1})])):x("",!0)]),h.value.length>0?(i(),u("div",at,[s("img",{ref_key:"randomPhoto_1",ref:de,class:"d-none",src:h.value[0].url_google,onLoad:t[1]||(t[1]=e=>L("1"))},null,40,st),y(B,{name:"fade",mode:"out-in"},{default:T(()=>[j[1]?(i(),u("img",{key:0,alt:"",style:{width:"auto",height:"25vh"},class:"random-photo",src:h.value[0].url_google},null,8,nt)):(i(),u("div",{key:1,style:I([{height:"25vh",width:"18.75vh"},{"background-color":q(J)(h.value[0].colors[0].h,h.value[0].colors[0].s,h.value[0].colors[0].l)}])},null,4))]),_:1})])):x("",!0)])]),s("main",it,[s("section",{ref_key:"showCaseDiv",ref:O,class:"pt-6 ps-6 d-flex justify-content-start overflow-scroll",style:{height:"33vh"},onWheel:$e(ge,["prevent"]),onMouseover:t[2]||(t[2]=e=>A.value=!0),onMouseleave:_e},[y(Pe,{name:"fade"},{default:T(()=>[(i(!0),u(Q,null,V(n.value,(e,o)=>(i(),u("div",{key:o},[e.type=="monthTag"?(i(),u("div",rt,[s("p",ct,[s("span",ht,m(e.zh),1),s("span",null,m(e.jp),1)])])):(i(),u("div",{key:1,role:"button",class:"position-relative color-data h-100",style:I({"background-color":q(J)(e.main_color.h,e.main_color.s,e.main_color.l),width:G.value+"px"}),"data-place":e.places.length>0?e.places:"無",onClick:a=>re(e)},null,12,dt))]))),128))]),_:1})],40,ut)]),s("section",vt,[s("div",ft,[s("div",pt,[gt,s("div",{ref_key:"controllerContainer",ref:X,class:"col-lg-4 d-flex flex-column gap-2 align-items-start"},[s("div",{role:"button",class:"luc-controller opacity-50 opacity-100-hover rounded-pill",onClick:t[3]||(t[3]=e=>M.value=!M.value)},[_t,s("span",mt,[ue.value?(i(),u("span",yt,"照片篩選中...")):(i(),u("span",kt,"篩選照片"))])])],512)]),h.value.length>1?(i(),u("div",bt,[s("img",{ref_key:"randomPhoto_2",ref:ve,src:h.value[1].url_google,class:"d-none",onLoad:t[4]||(t[4]=e=>L("2"))},null,40,xt),y(B,{name:"fade",mode:"out-in"},{default:T(()=>[j[2]?(i(),u("img",{key:0,alt:"",style:{width:"auto",height:"25vh"},class:"random-photo",src:h.value[1].url_google},null,8,wt)):(i(),u("div",{key:1,style:I([{height:"25vh",width:"18.75vh"},{"background-color":q(J)(h.value[1].colors[0].h,h.value[1].colors[0].s,h.value[1].colors[0].l)}])},null,4))]),_:1})])):x("",!0)])]),s("section",{class:F(["p-4 position-fixed top-0 end-0 w-lg-25 bg-silver h-100 overflow-y-scroll shadow-lg controller-panel",{show:M.value}])},[q(d)?(i(),u("div",St,[s("div",{class:"rounded-pill p-3 d-flex justify-content-center align-items-center shadow-lg bg-dark text-white",style:{width:"60px",height:"60px"},onClick:t[5]||(t[5]=e=>M.value=!1)},qt)])):x("",!0),s("span",$t,m(n.value.filter(e=>e._id).length)+" 張 / "+m(q(g).length)+" 張照片 ",1),s("div",Pt,[y(Z,{class:"w-100",label:"拍攝月份",options:w,"options-quants":H.value,"current-label":$.value.label,onChangeValue:ae},null,8,["options-quants","current-label"]),y(Z,{class:"w-100",label:"拍攝時間",options:S.value,"options-quants":E.value,"current-label":P.value.label,onChangeValue:ne},null,8,["options","options-quants","current-label"])]),s("div",Ct,[(i(!0),u(Q,null,V(v.value,e=>(i(),Y(Ue,{label:e.label,value:e.key,checked:r.value.includes(e.key),quant:W.value.find(o=>o.key===e.key),onChangeValue:N},null,8,["label","value","checked","quant"]))),256))])],2),y(B,{name:"fade",mode:"out-in"},{default:T(()=>[z.value?(i(),Y(Ie,{key:0,photo:_.value,onShowPrev:ce,onShowNext:he,onCloseModal:t[6]||(t[6]=e=>z.value=!1)},null,8,["photo"])):x("",!0)]),_:1}),y(ze,{class:"position-fixed top-0 d-flex align-items-center gap-1"}),y(Be)]))}},Jt=te(Tt,[["__scopeId","data-v-c19f7410"]]);export{Jt as default};
