import{_ as W,u as X,i as Y,e as d,r as v,I as Z,x as ee,o as te,a as n,c as r,b as t,t as i,C as N,n as P,g as h,z as $,T as j,h as q,F as y,l as x,B as oe,D as le,G as k,J as E,j as se,m as F,q as ae,H as ne,p as re,d as ce}from"./index-12b0ab8f.js";import{c as ie}from"./diff-0ab1811c.js";import{B as ue,N as de}from"./Navigator-7cbb3bbd.js";import{I as ve}from"./IroModal-bad7721a.js";import"./Polaroid-fd419cb8.js";import"./PolaroidText-b043200d.js";const b=_=>(re("data-v-ad936cec"),_=_(),ce(),_),pe={class:"z-1 min-vh-100 bg-silver"},he={class:"container pt-5 pt-lg-8"},_e={class:"row"},fe={class:"sticky-top d-flex flex-column flex-lg-row justify-content-between",style:{top:"30px"}},me={class:"py-4 py-lg-0"},ge=b(()=>t("h1",{class:"fs-4 ff-serif fw-bolder mb-4"},[t("span",{class:"d-block"},"相近的顏色"),t("span",{class:"fs-6 fw-normal"},"選んだ色に近い色の写真")],-1)),ye={class:"mb-2"},xe={class:"col-12 col-lg-4"},ke={class:"mb-1"},be={class:"mb-1"},we={class:"mb-0"},Se={key:0,class:"mt-5 grid-layout"},Ce={key:0,class:"position-sticky top-0"},Ie=["src"],Ne={key:0},Pe={class:"random-photo-container"},$e=["src"],Be={class:"px-4 ps-lg-6 pb-lg-6"},Re={class:"d-flex gap-2 my-2 my-lg-4"},Je=["onClick"],De={class:"txt-lang-container"},He={key:1},Me=b(()=>t("div",{class:"d-flex flex-column justify-content-center align-items-center loading-container"},[t("p",null,"找不到照片"),t("p",null,"写真が見つからない")],-1)),je=[Me],qe={key:2},Ee=b(()=>t("div",{class:"d-flex justify-content-center align-items-center loading-container"},[t("div",{role:"status",class:"spinner-border"})],-1)),Fe=[Ee],Oe={class:"ps-4 ps-lg-0 pb-8 overflow-x-scroll"},Ve=le('<div class="d-flex flex-column gap-3 py-4 border-top border-bottom mb-3" data-v-ad936cec><div class="d-flex gap-2" data-v-ad936cec><div class="d-flex gap-1 align-items-center" data-v-ad936cec><div style="width:15px;height:15px;" class="rounded-pill bg-dark opacity-25" data-v-ad936cec></div><span data-v-ad936cec>關西地區</span></div><div class="d-flex gap-1 align-items-center" data-v-ad936cec><div style="width:15px;height:15px;" class="bg-dark opacity-25" data-v-ad936cec></div><span data-v-ad936cec>非關西地區</span></div></div><div class="fs-small" data-v-ad936cec> 由於住在神戶，所以大部分生活照在關西地區，非關西地區則是出去旅遊的照片。 </div></div>',1),ze={class:"mb-3"},Le={class:"d-flex py-4 overflow-x-auto"},Te=["data-place","onClick"],Ge={key:1,class:"row"},Ae={class:"col-lg-6 mx-lg-auto mt-6"},Ke=b(()=>t("p",{class:"text-center mb-5"}," 找不太到相似顏色的照片，試試搜尋這些顏色？ ",-1)),Ue={class:"d-flex gap-3 justify-content-center"},Qe=["onClick"],We=10,Xe={__name:"ColorSearch",setup(_){const B=X(),w=Y("csvData",[]),c=d(()=>{if(B.query.color)return JSON.parse(B.query.color)}),S=d(()=>{if(c.value)return k(c.value.h,c.value.s,c.value.l)}),f=d(()=>{if(S.value)return E(S.value)}),O=d(()=>{if(c){const l=se(c.value);return{backgroundColor:`hsl(${c.value.h},${c.value.s}%,${c.value.l}%)`,color:`hsl(${l.h},${l.s}%,${l.l}%)`}}return""});function V(l,o){return ie(l,o)}const a=d(()=>{let l=[...w.value];l=l.filter(e=>e.main_color);let o=[];for(let e=0;e<l.length;e++){const s=l[e].colors[0],g=k(s.h,s.s,s.l),Q=E(g);V(f.value,Q)<We&&o.push(l[e])}return o=Array.from(new Set(o)),o=o.sort((e,s)=>new Date(e.iso_date.slice(0,-1))-new Date(s.iso_date.slice(0,-1))),o}),C=d(()=>a.value.length>0),I=v(!1),R=v(0),p=d(()=>{if(C.value)return a.value[R.value]});function J(){if(C.value){I.value=!1;const l=a.value.length-1;R.value=Math.floor(Math.random()*(l+1))}}const z=v(null),D=v(!1),L=[{label:"九月 Kugatsu",key:"09"},{label:"十月 Jyuugatsu",key:"10"},{label:"十一月 Jyuuichigatsu",key:"11"},{label:"十二月 Jyuunigatsu",key:"12"},{label:"一月 Ichigatsu",key:"01"},{label:"二月 Nigatsu",key:"02"},{label:"三月 Sangatsu",key:"03"}],m=v(!1),u=v(null);v(null);function H(l){u.value=l,m.value=!0}function T(){const l=e=>e.name===u.value.name,o=a.value.findIndex(l);o>0?a.value[o-1].main_color&&(u.value=a.value[o-1]):u.value=a.value[a.value.length-1]}function G(){const l=e=>e.name===u.value.name,o=a.value.findIndex(l);o==a.value.length-1?u.value=a.value[0]:a.value[o+1].main_color&&(u.value=a.value[o+1])}const A=d(()=>{let l=[];const o=JSON.parse(JSON.stringify(w.value.filter(e=>e.main_color)));if(o.length>0){const e=o.length-1;for(let s=0;s<4;s++){let g=Math.floor(Math.random()*(e+1));l.push(o[g].main_color)}return l}}),M=Z();function K(l){M.push({path:"/color_search",query:{color:JSON.stringify(l)}})}function U(l){M.push({path:"/all",query:{place:JSON.stringify(l)}})}return ee((l,o)=>{m.value=!1}),te(()=>{window.setInterval(()=>{J()},6e4),J()}),(l,o)=>(n(),r("main",pe,[t("div",he,[t("div",_e,[t("div",fe,[t("div",me,[ge,t("div",ye,[t("span",null,i(a.value.length+"張 / "+N(w).length+"張照片"),1)])]),t("div",xe,[t("div",{class:"rounded-3 ms-0 shadow-lg p-2 fs-small",style:P(O.value)},[t("p",ke,i(S.value),1),t("p",be,i("RGB: "+f.value.r+", "+f.value.g+", "+f.value.b),1),t("p",we,i("HSL: "+c.value.h+"o, "+c.value.s+"%, "+c.value.l+"%"),1)],4)])])])]),C.value?(n(),r("section",Se,[t("section",null,[p.value?(n(),r("div",Ce,[t("img",{src:p.value.url_google,style:{width:"1px"},class:"position-absolute",onLoad:o[0]||(o[0]=e=>I.value=!0),onError:o[1]||(o[1]=e=>D.value=!0)},null,40,Ie),h(j,{name:"fade",mode:"out-in"},{default:$(()=>[I.value?(n(),r("section",Ne,[t("div",Pe,[t("img",{ref_key:"randomPhotoEl",ref:z,class:"img-fluid w-100 random-photo",role:"button",src:p.value.url_google,onClick:o[2]||(o[2]=e=>H(p.value))},null,8,$e)]),t("div",Be,[t("div",Re,[(n(!0),r(y,null,x(p.value.places,e=>(n(),r("div",{key:e.key,class:"px-2 py-1 rounded-pill transition txt-lang-hover bg-dark text-white flex-wrap",role:"button",onClick:s=>U(e)},[t("div",De,[t("span",null,"#"+i(e),1),t("span",null,"#"+i(e),1)])],8,Je))),128))]),t("p",null,i(p.value.description),1)])])):D.value?(n(),r("section",He,je)):(n(),r("section",qe,Fe))]),_:1})])):q("",!0)]),t("section",Oe,[t("div",null,[Ve,(n(),r(y,null,x(L,e=>t("section",ze,[t("div",{class:F(["d-flex gap-2 ff-serif",a.value.filter(s=>s.date.split("/")[1]==e.key).length>0?"":"opacity-50"])},[t("p",null,[t("strong",null,i(e.label.split(" ")[0]),1),ae(" "+i(e.label.split(" ")[1]),1)]),t("span",null,"("+i(a.value.filter(s=>s.date.split("/")[1]==e.key).length)+")",1)],2),t("div",Le,[(n(!0),r(y,null,x(a.value.filter(s=>s.date.split("/")[1]==e.key),s=>(n(),r("div",{style:P({"background-color":N(k)(s.main_color.h,s.main_color.s,s.main_color.l)}),class:F([s.area=="kansai"?"rounded-pill":"","position-relative color-data flex-shrink-0"]),role:"button","data-place":s.places.length>0?s.places:"無",onClick:g=>H(s)},null,14,Te))),256))])])),64))])])])):(n(),r("section",Ge,[t("div",Ae,[Ke,t("div",Ue,[h(oe,{name:"fade"},{default:$(()=>[(n(!0),r(y,null,x(A.value,e=>(n(),r("div",{style:P({"background-color":N(k)(e.h,e.s,e.l)}),class:"rounded-pill color-other",role:"button",key:e.h+e.s+e.l,onClick:s=>K(e)},null,12,Qe))),128))]),_:1})])])])),h(j,{name:"fade",mode:"out-in"},{default:$(()=>[m.value?(n(),ne(ve,{key:0,photo:u.value,onShowPrev:T,onShowNext:G,onCloseModal:o[3]||(o[3]=e=>m.value=!1)},null,8,["photo"])):q("",!0)]),_:1}),h(ue,{class:"position-fixed top-0 d-flex align-items-center gap-1"}),h(de)]))}},st=W(Xe,[["__scopeId","data-v-ad936cec"]]);export{st as default};
