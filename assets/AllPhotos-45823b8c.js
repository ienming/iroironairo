import{r,a as s,c as u,b as i,t as y,k as ke,v as we,F as G,l as R,m as X,q as le,h as p,_ as ae,i as ee,e as B,s as xe,u as Se,x as qe,y as je,o as $e,w as Ce,g as x,z as J,T as I,A as Ne,B as Pe,C as T,D as L,E as Te,G as Me,n as A,H as D,p as Be,d as Je}from"./index-55da85dd.js";import{B as Oe,N as ze}from"./Navigator-8eee1c28.js";import"./PolaroidText-e9f8eda4.js";import{I as Ie}from"./IroModal-230d99a1.js";import"./Polaroid-8901068a.js";const Le={class:"iro-selection-button p-2 rounded position-relative d-flex",type:"button"},Ae={class:"flex-shrink-0"},De={class:"w-100 d-flex justify-content-between align-items-center"},Ve={class:"me-5"},Qe=i("i",{class:"fa-solid fa-chevron-down"},null,-1),Fe={class:"list-group list-group-flush shadow-lg rounded position-absolute top-0 w-100 iro-selection-list"},We=["onClick"],He={key:0},te={__name:"Selection",props:["label","options","optionsQuants","currentLabel"],emits:["change-value"],setup(d,{emit:S}){const c=r(!1);function M(n){S("change-value",n)}return(n,_)=>(s(),u("div",{class:"iro-selection position-relative",onMouseenter:_[0]||(_[0]=f=>c.value=!0),onMouseleave:_[1]||(_[1]=f=>c.value=!1)},[i("div",Le,[i("span",Ae,y(d.label+"："),1),i("span",De,[i("span",Ve,y(d.currentLabel),1),Qe])]),ke(i("ul",Fe,[(s(!0),u(G,null,R(d.options,f=>(s(),u("li",{type:"button",class:X(["list-group-item list-group-item-action",d.currentLabel==f.label?"active":""]),"aria-current":"true",onClick:h=>M(f.key)},[le(y(f.label)+" ",1),d.optionsQuants.length==d.options.length&&f.label!=="全部"?(s(),u("span",He," ("+y(d.optionsQuants.find(h=>h.key==f.key).quant)+")",1)):p("",!0)],10,We))),256))],512),[[we,c.value]])],32))}};const Ee={class:"checkbox-btn"},Ge=["id"],Re=["for"],Xe={key:0,class:"fa-solid fa-plus"},Ke={key:1,class:"fa-solid fa-check"},Ue={key:2},Ye={__name:"ButtonCheckbox",props:{label:{type:String,default:"label"},value:{type:String,default:"value"},checked:{type:Boolean,default:!1},quant:{type:Object,default:{}}},emits:["change-value"],setup(d,{emit:S}){const c=d;return(M,n)=>(s(),u("div",Ee,[i("input",{id:c.value,type:"checkbox",class:"d-none",onChange:n[0]||(n[0]=_=>S("change-value",{key:c.value,value:!c.checked}))},null,40,Ge),i("label",{for:c.value,role:"button",class:X(["m-0 px-2 py-1 rounded-pill border border-dark flex-shrink-0 opacity-75-hover",c.quant.quant>0&&c.checked?["bg-dark","text-white"]:"opacity-25"])},[le(y(c.label)+" ",1),c.checked?(s(),u("i",Ke)):(s(),u("i",Xe)),c.value!=="全部"?(s(),u("span",Ue,"("+y(c.quant.quant)+")",1)):p("",!0)],10,Re)]))}},Ze=ae(Ye,[["__scopeId","data-v-93a3501a"]]);const oe=d=>(Be("data-v-9f8bb841"),d=d(),Je(),d),et={class:"min-vh-100 bg-silver"},tt={class:"d-flex"},lt={key:0,id:"randomPhoto_3"},at=["src"],ot=["src"],nt={key:1,class:"d-none d-lg-block",id:"randomPhoto_1"},st=["src"],it=["src"],ut={class:"row justify-content-center"},rt=["onWheel"],ct={key:0,style:{height:"25vh"},class:"ff-serif position-relative"},ht={class:"bg-silver p-1 m-0 position-absolute",style:{top:"-60px"}},vt={class:"mb-1 fw-bold d-block"},ft=["data-place","onClick"],dt={class:"position-relative"},pt={class:"d-flex"},gt={class:"row ff-serif text-dark col-lg-5 me-auto ps-3 ps-lg-6 pt-3 d-flex"},yt=Te('<div class="col-lg-8" data-v-9f8bb841><h2 class="fs-6" data-v-9f8bb841>iroironairo</h2><h1 class="fw-semibold mt-2 mb-3" data-v-9f8bb841>色々な色</h1><h3 class="d-flex flex-grow align-items-center opacity-50" style="font-size:14px;" data-v-9f8bb841><span data-v-9f8bb841>2022.09.28</span><div style="height:1px;" class="w-100 bg-dark mx-2" data-v-9f8bb841></div><span data-v-9f8bb841>2023.03.24</span></h3></div>',1),_t=oe(()=>i("i",{class:"fa-solid fa-swatchbook"},null,-1)),mt={class:"ff-sans ps-2 fs-small"},bt={key:0},kt={key:1},wt={key:0,class:"ms-auto pe-lg-8 pt-3",id:"randomPhoto_2"},xt=["src"],St=["src"],qt={key:0,class:"d-flex justify-content-end pb-4"},jt=oe(()=>i("i",{class:"fa-solid fa-xmark fa-xl",role:"button"},null,-1)),$t=[jt],Ct={class:"pb-2 d-block"},Nt={key:1,class:"d-flex flex-wrap gap-3"},Pt={class:"mt-4 d-flex gap-2 flex-wrap"},Tt={__name:"AllPhotos",setup(d){const S=r(!1),c=ee("csvData",[]),M=ee("usingMobile",!1),n=B(()=>{let l=c.value.filter(e=>e.main_color);if(h.value.length<f.value.length){let e=[];h.value.forEach(a=>{e=e.concat(l.filter(o=>a!=="全部"?o.places.includes(a):o))});const t=new Set(e);l=Array.from(t)}if(k.value.key!=="0"&&(l=l.filter(e=>e.date.split("/")[1]==k.value.key)),w.value.key!=="全部"&&(l=l.filter(e=>e.time.split(":")[0]==w.value.key)),S.value){let e="h";return l=l.sort((t,a)=>t.main_color[e]-a.main_color[e]),l}else{l=l.sort((t,a)=>new Date(t.iso_date.slice(0,-1))-new Date(a.iso_date.slice(0,-1)));let e=[];for(let t=0;t<l.length;t++){const a=l[t].date.split("/")[1];if(t==0){let o={type:"monthTag",value:a};const P=_(a);o.zh=P.zh,o.jp=P.jp,e.push(o)}if(e.push(l[t]),t<l.length-1){const o=l[t+1].date.split("/")[1];if(a!==o){let P={type:"monthTag",value:o};const Z=_(o);P.zh=Z.zh,P.jp=Z.jp,e.push(P)}}}return e}});function _(l){let e={};switch(l){case"09":e.zh="九月",e.jp="Kugatsu";break;case"10":e.zh="十月",e.jp="Jyuugatsu";break;case"11":e.zh="十一月",e.jp="Jyuuichigatsu";break;case"12":e.zh="十二月",e.jp="Jyuunigatsu";break;case"01":e.zh="一月",e.jp="Ichigatsu";break;case"02":e.zh="二月",e.jp="Nigatsu";break;case"03":e.zh="三月",e.jp="Sangatsu";break}return e}const f=B(()=>{let l=c.value.map(a=>a.places).filter(a=>Array.isArray(a)),e=["全部"];for(let a=0;a<l.length;a++)for(let o=0;o<l[a].length;o++)e.push(l[a][o]);return e=new Set(e),[...e].map(a=>({key:a,label:a}))}),h=r([]);for(let l=0;l<f.value.length;l++)h.value.push(f.value[l].key);function ne(l){if(l.key==="全部")if(l.value){h.value=[];for(let e=0;e<f.value.length;e++)h.value.push(f.value[e].key)}else h.value=[];else l.value?h.value.push(l.key):h.value=h.value.filter(e=>e!==l.key);F()}const m=r([]);function se(){const l=JSON.parse(JSON.stringify(n.value.filter(t=>t.type!=="monthTag")));let e=[];for(let t=0;t<f.value.length;t++){let a={};a.key=f.value[t].key,t==0?a.quant=n.value.filter(o=>o.type!=="monthTag").length:a.quant=l.filter(o=>o.places.includes(f.value[t].key)).length,e.push(a)}m.value=e}xe(()=>{const l=Se();if(JSON.stringify(l.query)!=="{}"){const e=JSON.parse(l.query.place);h.value=[],h.value.push(e)}}),qe((l,e)=>{const t=JSON.parse(l.query.place);h.value=[],h.value.push(t),z.value=!1});const q=[{label:"全部",key:"0"},{label:"九月",key:"09"},{label:"十月",key:"10"},{label:"十一月",key:"11"},{label:"十二月",key:"12"},{label:"一月",key:"01"},{label:"二月",key:"02"},{label:"三月",key:"03"}],k=r(q[0]);function ie(l){k.value=q.find(e=>e.key==l),F()}const j=r([]);function ue(){const l=JSON.parse(JSON.stringify(n.value.filter(t=>t.type!=="monthTag")));let e=[];for(let t=0;t<q.length;t++){let a={};a.key=q[t].key,t==0?a.quant=n.value.filter(o=>o.type!=="monthTag").length:a.quant=l.filter(o=>o.date.split("/")[1]==q[t].key).length,e.push(a)}j.value=e}const $=B(()=>{let l=c.value.map(a=>a.time).filter(a=>a),e=[];for(let a=0;a<l.length;a++)e.push(l[a].split(":")[0]);return e.sort((a,o)=>a-o),e.unshift("全部"),e=new Set(e),[...e].map(a=>{let o={key:a,label:a};return a!=="全部"&&(a<6&&(o.label="凌晨"+a.slice(-1)+"點"),a>=6&&a<10&&(o.label="早上"+a.slice(-1)+"點"),a>=10&&a<12&&(o.label="早上"+a+"點"),a==12&&(o.label="中午12點"),a>12&&a<18&&(o.label="下午"+(a*1-12)+"點"),a>=18&&(o.label="晚上"+(a*1-12)+"點")),o})}),w=r($.value[0]);function re(l){w.value=$.value.find(e=>e.key==l),F()}const C=r([]);function ce(){const l=JSON.parse(JSON.stringify(n.value.filter(t=>t.type!=="monthTag")));let e=[];for(let t=0;t<$.value.length;t++){let a={};a.key=$.value[t].key,t==0?a.quant=n.value.filter(o=>o.type!=="monthTag").length:a.quant=l.filter(o=>o.time.split(":")[0]==$.value[t].key).length,e.push(a)}C.value=e}const K=r(10),O=r(!1),he=B(()=>w.value.label!=="全部"||k.value.label!=="全部"||!h.value.includes("全部")),z=r(!1),g=r(null);r(null);function ve(l){g.value=l,z.value=!0}function fe(){const l=t=>t.name===g.value.name,e=n.value.findIndex(l);n.value[e-1].main_color?g.value=n.value[e-1]:e==1?g.value=n.value[n.value.length-1]:g.value=n.value[e-2]}function de(){const l=t=>t.name===g.value.name,e=n.value.findIndex(l);e==n.value.length-1?g.value=n.value[1]:n.value[e+1].main_color?g.value=n.value[e+1]:g.value=n.value[e+2]}const b=r([]),N=je({}),[pe,ge,ye]=[r(null),r(null),r(null)],v=B(()=>{let l=[];const e=JSON.parse(JSON.stringify(n.value)).filter(t=>t.type!=="monthTag");return b.value.forEach(t=>{l.push(e[t])}),l});function V(){b.value=[];for(const t in N)N[t]=!1;const l=JSON.parse(JSON.stringify(n.value)).filter(t=>t.type!=="monthTag"),e=l.length-1;if(l.length>3)for(;b.value.length<3;){const t=Math.floor(Math.random()*(e+1));b.value.includes(t)||b.value.push(t)}else for(;b.value.length<=l.length-1;){const t=Math.floor(Math.random()*(e+1));b.value.includes(t)||b.value.push(t)}}function Q(l){N[l]=!0}function F(){let l=c.value.filter(e=>e.main_color);if(n.value.length==0){h.value.length==0&&(k.value.label!=="全部"&&(l=l.filter(e=>e.date.split("/")[1]==k.value.key)),w.value.label!=="全部"&&(l=l.filter(e=>e.time.split(":")[0]==w.value.key)));for(let e=0;e<m.value.length;e++)e!==0&&(m.value[e].quant=l.filter(t=>t.places.includes(m.value[e].key)).length)}else{l=JSON.parse(JSON.stringify(n.value.filter(e=>e.type!=="monthTag")));for(let e=0;e<C.value.length;e++)e!==0&&(C.value[e].quant=l.filter(t=>t.time.split(":")[0]==C.value[e].key).length);for(let e=0;e<j.value.length;e++)e!==0&&(j.value[e].quant=l.filter(t=>t.date.split("/")[1]==j.value[e].key).length);for(let e=0;e<m.value.length;e++)e!==0&&(m.value[e].quant=l.filter(t=>t.places.includes(m.value[e].key)).length)}}const W=r(null);function _e(){const l=W.value;event.deltaX==0?l.scrollLeft+=event.deltaY:l.scrollLeft+=event.deltaX}const H=r(!1),U=r(!1);function E(){const l=W.value;if(l){const e=l.clientWidth,t=l.scrollWidth;if(!H.value&&l.scrollLeft<t-e){if(!U.value){let a=l.scrollLeft+1;l.scrollLeft=a,requestAnimationFrame(E)}}else l.scrollLeft>=t-e&&(U.value=!0)}}function me(){H.value=!1,E()}const Y=r(null);function be(){Me(()=>{[...Y.value.querySelectorAll('[data-bs-toggle="tooltip"]')].map(e=>new bootstrap.Tooltip(e))})}return $e(()=>{window.setInterval(()=>{V()},3e4),Ce(n,(l,e)=>{V(),ce(),ue(),se()}),window.setTimeout(()=>{requestAnimationFrame(E)},3e3),M.value&&(K.value=30),V(),be()}),(l,e)=>(s(),u("div",et,[i("section",null,[i("div",tt,[v.value.length>2?(s(),u("div",lt,[i("img",{ref_key:"randomPhoto_3",ref:ye,src:v.value[2].url_google,class:"d-none",onLoad:e[0]||(e[0]=t=>Q("3"))},null,40,at),x(I,{name:"fade",mode:"out-in"},{default:J(()=>[N[3]?(s(),u("img",{key:0,src:v.value[2].url_google,alt:"",style:{width:"auto",height:"25vh"},class:"random-photo"},null,8,ot)):(s(),u("div",{key:1,style:A([{height:"25vh",width:"18.75vh"},{"background-color":T(D)(v.value[2].colors[0].h,v.value[2].colors[0].s,v.value[2].colors[0].l)}])},null,4))]),_:1})])):p("",!0),v.value.length>0?(s(),u("div",nt,[i("img",{ref_key:"randomPhoto_1",ref:pe,src:v.value[0].url_google,class:"d-none",onLoad:e[1]||(e[1]=t=>Q("1"))},null,40,st),x(I,{name:"fade",mode:"out-in"},{default:J(()=>[N[1]?(s(),u("img",{key:0,src:v.value[0].url_google,alt:"",style:{width:"auto",height:"25vh"},class:"random-photo"},null,8,it)):(s(),u("div",{key:1,style:A([{height:"25vh",width:"18.75vh"},{"background-color":T(D)(v.value[0].colors[0].h,v.value[0].colors[0].s,v.value[0].colors[0].l)}])},null,4))]),_:1})])):p("",!0)])]),i("main",ut,[S.value?p("",!0):(s(),u("section",{key:0,class:"pt-6 ps-6 d-flex justify-content-start overflow-scroll",ref_key:"showCaseDiv",ref:W,onWheel:Ne(_e,["prevent"]),onMouseover:e[2]||(e[2]=t=>H.value=!0),onMouseleave:me},[x(Pe,{name:"fade"},{default:J(()=>[(s(!0),u(G,null,R(n.value,(t,a)=>(s(),u("div",{key:a},[t.type=="monthTag"?(s(),u("div",ct,[i("p",ht,[i("span",vt,y(t.zh),1),i("span",null,y(t.jp),1)])])):(s(),u("div",{key:1,style:A([{height:"25vh"},{"background-color":T(D)(t.main_color.h,t.main_color.s,t.main_color.l),width:K.value+"px"}]),role:"button",class:"position-relative color-data","data-place":t.places.length>0?t.places:"無",onClick:o=>ve(t)},null,12,ft))]))),128))]),_:1})],40,rt))]),i("section",dt,[i("div",pt,[i("div",gt,[yt,i("div",{ref_key:"controllerContainer",ref:Y,class:"col-lg-4 d-flex flex-column gap-2 align-items-start"},[i("div",{class:"luc-controller opacity-50 opacity-100-hover rounded-pill",role:"button",onClick:e[3]||(e[3]=t=>O.value=!O.value)},[_t,i("span",mt,[he.value?(s(),u("span",bt,"照片篩選中...")):(s(),u("span",kt,"篩選照片"))])])],512)]),v.value.length>1?(s(),u("div",wt,[i("img",{ref_key:"randomPhoto_2",ref:ge,src:v.value[1].url_google,class:"d-none",onLoad:e[4]||(e[4]=t=>Q("2"))},null,40,xt),x(I,{name:"fade",mode:"out-in"},{default:J(()=>[N[2]?(s(),u("img",{key:0,src:v.value[1].url_google,alt:"",style:{width:"auto",height:"25vh"},class:"random-photo"},null,8,St)):(s(),u("div",{key:1,style:A([{height:"25vh",width:"18.75vh"},{"background-color":T(D)(v.value[1].colors[0].h,v.value[1].colors[0].s,v.value[1].colors[0].l)}])},null,4))]),_:1})])):p("",!0)])]),i("section",{class:X(["p-4 position-fixed top-0 end-0 w-lg-25 bg-silver h-100 overflow-y-scroll shadow-lg controller-panel",{show:O.value}])},[T(M)?(s(),u("div",qt,[i("div",{class:"rounded-pill p-3 d-flex justify-content-center align-items-center shadow-lg bg-dark text-white",style:{width:"60px",height:"60px"},onClick:e[5]||(e[5]=t=>O.value=!1)},$t)])):p("",!0),i("span",Ct,y(n.value.filter(t=>t._id).length)+" 張 / "+y(T(c).length)+" 張照片 ",1),n.value.length>0?(s(),u("div",Nt,[j.value.length>0?(s(),L(te,{key:0,class:"w-100",label:"拍攝月份",options:q,"options-quants":j.value,"current-label":k.value.label,onChangeValue:ie},null,8,["options-quants","current-label"])):p("",!0),C.value.length>0?(s(),L(te,{key:1,class:"w-100",label:"拍攝時間",options:$.value,"options-quants":C.value,"current-label":w.value.label,onChangeValue:re},null,8,["options","options-quants","current-label"])):p("",!0)])):p("",!0),i("div",Pt,[(s(!0),u(G,null,R(f.value,t=>(s(),L(Ze,{label:t.label,value:t.key,checked:h.value.includes(t.key),quant:m.value.find(a=>a.key==t.key),onChangeValue:ne},null,8,["label","value","checked","quant"]))),256))])],2),x(I,{name:"fade",mode:"out-in"},{default:J(()=>[z.value?(s(),L(Ie,{key:0,photo:g.value,onShowPrev:fe,onShowNext:de,onCloseModal:e[6]||(e[6]=t=>z.value=!1)},null,8,["photo"])):p("",!0)]),_:1}),x(Oe,{class:"position-fixed top-0 d-flex align-items-center gap-1"}),x(ze)]))}},It=ae(Tt,[["__scopeId","data-v-9f8bb841"]]);export{It as default};
